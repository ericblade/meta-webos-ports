From a21368cabc6d28a45e961804521e32474b70b9fd Mon Sep 17 00:00:00 2001
From: Martin Jansa <martin2.jansa@lgepartner.com>
Date: Thu, 8 Dec 2022 13:50:07 +0000
Subject: [PATCH] Revert "Cater for upstream changes in eglplatform.h"

This reverts commit 4cc5428548cb8ab973e4b0281dd123d59bfaf6a0.
---
 src/gui/configure.cmake                | 1 -
 src/gui/opengl/platform/egl/qt_egl_p.h | 6 +-----
 2 files changed, 1 insertion(+), 6 deletions(-)

diff --git a/src/gui/configure.cmake b/src/gui/configure.cmake
index 9844d778e6..23b45379db 100644
--- a/src/gui/configure.cmake
+++ b/src/gui/configure.cmake
@@ -171,7 +171,6 @@ qt_config_compile_test(egl_x11
 // has to be disabled in plugins like xcb in this case since the native display,
 // window and pixmap types will be different than what an X-based platform
 // plugin would expect.
-#define USE_X11
 #include <EGL/egl.h>
 #include <X11/Xlib.h>
 
diff --git a/src/gui/opengl/platform/egl/qt_egl_p.h b/src/gui/opengl/platform/egl/qt_egl_p.h
index 1f538e22af..1ea333d41a 100644
--- a/src/gui/opengl/platform/egl/qt_egl_p.h
+++ b/src/gui/opengl/platform/egl/qt_egl_p.h
@@ -30,11 +30,7 @@
 # if !defined(Q_OS_INTEGRITY)
 #  define WIN_INTERFACE_CUSTOM   // NV
 # endif // Q_OS_INTEGRITY
-#else // QT_EGL_NO_X11
-// If one has an eglplatform.h with https://github.com/KhronosGroup/EGL-Registry/pull/130
-// that needs USE_X11 to be defined.
-# define USE_X11
-#endif
+#endif  // QT_EGL_NO_X11
 
 #ifdef QT_EGL_WAYLAND
 # define WAYLAND // NV
